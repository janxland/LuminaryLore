(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6552:function(e,t,r){Promise.resolve().then(r.bind(r,7221))},7221:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(9268),l=r(5032),s=r(3109),i=r(2092),c=r(5629),a=r(6105),u=r(551),o=r(2874),d=r(8225),h=r(3697),f=r(7646),x=r(9308),m=r(5846),g=r.n(m),v=r(6006),j=r(3894);let p=(0,x.Pi)(()=>{let{settingsStore:e}=(0,o.Yh)(),{t}=(0,j.$)("home"),{error:r,data:l,isLoading:s,refetch:i}=(0,f.a)({queryKey:["getLoveData"],queryFn:async()=>d.c8.getAllLoveByType((0,h.P)(e.getSetting("model")))});return((0,v.useEffect)(()=>{i()},[e.getSetting("model")]),s)?(0,n.jsx)(u.Z,{}):r?(0,n.jsx)(c.Z,{error:r}):l&&0!==l.length?(0,n.jsx)(a.Z.Grid,{children:l.map(e=>(0,n.jsx)(g(),{href:{pathname:"/detail",query:{pkg:e.package,url:e.url,cover:e.cover}},children:(0,n.jsx)(a.Z.Fragment,{itemData:e})},e.id))}):(0,n.jsxs)("div",{className:"m-28 text-center text-gray-400",children:[(0,n.jsx)("p",{children:t("no-collection.title")}),(0,n.jsx)("p",{children:t("no-collection.message")})]})});function b(e){let{pkg:t,url:r}=e,{extensionStore:l}=(0,o.Yh)(),{data:s,error:i}=(0,f.a)({queryKey:["checkUpdate",t,r],queryFn:()=>{var e;return null===(e=l.getExtension(t))||void 0===e?void 0:e.checkUpdate(r)}});return!s||i?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(n.Fragment,{children:s})}var N=r(6990);let y=(0,x.Pi)(()=>{let{settingsStore:e,historyStore:t}=(0,o.Yh)(),{t:r}=(0,j.$)("home"),{error:l,data:s,isLoading:i,refetch:a}=(0,f.a)({queryKey:["getHistoryData"],queryFn:async()=>t.getHistoryByType((0,h.P)(e.getSetting("model")),8)});return((0,v.useEffect)(()=>{a()},[e.getSetting("model"),t.history]),i)?(0,n.jsx)(u.Z,{}):l?(0,n.jsx)(c.Z,{error:l}):s&&0!==s.length?(0,n.jsxs)("div",{className:"-ml-230px flex overflow-auto pb-3 scrollbar-none",children:[(0,n.jsx)("div",{className:"ml-230px"}),s.map((e,t)=>(0,n.jsx)("div",{className:"relative mr-4 flex-shrink-0 overflow-hidden rounded-lg",style:{width:"350px",height:"200px"},children:(0,n.jsxs)(g(),{href:{pathname:"/detail",query:{pkg:e.package,url:e.url}},children:["fikushon"===e.type&&(0,n.jsx)("div",{className:"h-full w-full ",children:(0,n.jsx)("div",{className:"m-auto  h-full rounded bg-slate-200 p-2 text-lg dark:bg-black dark:bg-opacity-40",children:e.cover})})||e.cover&&(0,n.jsx)(N.default,{className:"h-full w-full object-cover",src:e.cover,alt:e.title})||(0,n.jsx)("div",{className:"h-full w-full",style:{backgroundColor:"hsl(".concat(Math.floor(360*Math.random()),", 100%, 80%)")}}),(0,n.jsxs)("div",{className:"absolute left-0 right-0 bottom-0 bg-gradient-to-t from-black p-2",children:[(0,n.jsxs)("p",{className:" mt-3 mb-1 text-xs text-neutral-300",children:[(0,n.jsx)(b,{pkg:e.package,url:e.url})," ","看到 ",e.chapter]}),(0,n.jsx)("p",{className:"text-white",children:e.title})]})]})},t))]}):(0,n.jsxs)("div",{className:"m-14 text-center text-gray-400",children:[(0,n.jsx)("p",{children:r("no-continue-viewing.title")}),(0,n.jsx)("p",{children:r("no-continue-viewing.message")})]})});var k=r(7356);function w(){let{t:e}=(0,j.$)("home");return(0,v.useEffect)(()=>{(0,k.Z)(e("title"))},[]),(0,n.jsx)(s.default,{children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(i.Z,{title:e("title")}),(0,n.jsx)("h2",{className:"mb-5 text-2xl font-bold",children:e("continue-viewing")}),(0,n.jsx)(y,{}),(0,n.jsx)("h2",{className:"mb-5 text-2xl font-bold",children:e("collection")}),(0,n.jsx)(p,{})]})})}},5032:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(9268),l=r(9791);function s(e){return(0,n.jsx)("div",{...e,className:(0,l.Z)("pl-5 pt-5 pr-5 md:pl-10 md:pr-10 md:pt-10",e.className),children:e.children})}},5629:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9268),l=r(3894),s=r(6006);function i(e){let{error:t}=e,[r,i]=(0,s.useState)(""),{t:c}=(0,l.$)();return((0,s.useEffect)(()=>{if(t){if("object"==typeof t)return i(t.toString());i(t)}},[t]),r)?(0,n.jsxs)("div",{className:"my-28 text-center",children:[(0,n.jsx)("p",{className:"text-2xl font-bold",children:c("an-error-has-occurred")}),(0,n.jsx)("p",{className:"text-sm",children:r})]}):null}},6105:function(e,t,r){"use strict";var n=r(9268),l=r(9791),s=r(6990);t.Z={Grid:function(e){return(0,n.jsx)("div",{className:(0,l.Z)("grid grid-cols-2 gap-3 md:grid-cols-4 lg:grid-cols-5",e.className),children:e.children})},Fragment:function(e){let{itemData:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"h-60vw max-h-96 w-full md:h-30vw lg:h-20vw",children:t.cover&&(0,n.jsx)(s.default,{className:"h-full w-full rounded-lg object-cover",src:t.cover,alt:t.title})||(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-lg bg-gray-200 p-3 text-xl ",children:t.title})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"mt-3 mb-1 text-xs text-gray-400",children:[" ",t.update]}),(0,n.jsx)("p",{children:t.title})]})]})}}},3109:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(9268),l=r(3039);function s(e){return(0,n.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:0},children:e.children})}},8654:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(9268),l=r(9791);function s(e){return(0,n.jsx)("div",{...e,className:(0,l.Z)("h-full w-full animate-pulse rounded-xl bg-slate-200 dark:bg-zinc-700",e.className)})}},2092:function(e,t,r){"use strict";var n=r(9268),l=r(3894),s=r(2874),i=r(9308),c=r(5810);let a=(0,i.Pi)(e=>{let{settingsStore:t}=(0,s.Yh)(),{t:r}=(0,l.$)(),i=[{title:r("bangumi")},{title:r("manga")},{title:r("fikushon")}],a=r=>{var n;t.setSetting("model",r),null===(n=e.handleTabChange)||void 0===n||n.call(e,r)};return(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("h1",{className:"mb-5 text-3xl font-bold",children:e.title}),(0,n.jsx)(c.Z,{tabs:i,onChange:a,index:t.getSetting("model")})]})});t.Z=a},5810:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(9268),l=r(9791),s=r(6006);function i(e){var t;let[r,i]=(0,s.useState)(0),c=t=>{var r;i(t),null===(r=e.onChange)||void 0===r||r.call(e,t)};(0,s.useEffect)(()=>{void 0!==e.index&&i(Number(e.index))},[e.index,e.tabs]);let a=e.tabs.map((e,t)=>(0,n.jsx)("button",{onClick:()=>c(t),className:(0,l.Z)("mr-2 break-keep rounded-full border pl-3 pr-3 pt-2 pb-2 text-sm ","".concat(r===t?"bg-black text-white dark:bg-black ":"bg-white dark:bg-zinc-700")),children:e.title},t));return(0,n.jsx)("div",{className:(0,l.Z)("overflow-x-scroll scrollbar-none"),children:e.tabs.length>0&&(0,n.jsxs)(n.Fragment,{children:[e.tabs.length>1&&(0,n.jsx)("div",{className:(0,l.Z)("flex overflow-auto scrollbar-none mb-3",e.className),children:a}),(0,n.jsx)("div",{children:null===(t=e.tabs[r])||void 0===t?void 0:t.content})]})})}},6990:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(9268),l=r(6006),s=r(8654);function i(e){var t,r;let i=(0,l.useRef)(null),[c,a]=(0,l.useState)(!1),[u,o]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{if(i.current){if(i.current.complete){a(!0);return}i.current.onload=()=>{a(!0)},i.current.addEventListener("error",()=>{o(!0)})}return()=>{i.current&&i.current.removeEventListener("error",()=>{console.log("error")})}},[e.src]),u)?(0,n.jsx)(n.Fragment,{children:null!==(t=e.errorview)&&void 0!==t?t:(0,n.jsx)("div",{className:"h-full w-full bg-gray-200"})}):(0,n.jsxs)(n.Fragment,{children:[!c&&(null!==(r=e.loadview)&&void 0!==r?r:(0,n.jsx)(s.Z,{className:"h-full w-full"})),(0,n.jsx)("img",{hidden:!c,ref:i,...e})]})}},3697:function(e,t,r){"use strict";function n(e){switch(Number(e)){case 0:default:return"bangumi";case 1:return"manga";case 2:return"fikushon"}}r.d(t,{P:function(){return n}})},7356:function(e,t,r){"use strict";function n(e){document.title="".concat(e," | Miru")}r.d(t,{Z:function(){return n}})}},function(e){e.O(0,[147,684,947,646,846,371,667,139,744],function(){return e(e.s=6552)}),_N_E=e.O()}]);